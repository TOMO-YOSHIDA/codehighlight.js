"use strict";var CHL;!function(e){var t=function(){function e(e,t){this.code=e,this.tag=void 0,/@__@@/.test(e)&&(this.code=e.replace(/@__@@/g,""),this.tag=t)}return e.prototype.toString=function(){var e=this.code;if(e=e.replace(/['"<>&`]/g,function(e){return"&#"+e.charCodeAt(0)+";"}),!this.tag)return"<span>"+e.replace(/[\r\n]/g,"<br></span></div><div><span>");var t='<span class="'+this.tag+'">',n="</span>";return t+e.replace(/[\r\n]/g,n+"</div><div>"+t)+n},e.prototype.markCodeAndStore=function(t,n){if(this.tag)return n.push(this);var r=(t.str||"`$1`").replace(/`/g,e.M),a=this.code.replace(t.regex,r),i=a.split(/(@__@@[\w\W]+?@__@@)/);i.forEach(function(r){n.push(new e(r,t["class"]))})},e.flatten=function(t){var n=[],r="";return t.forEach(function(t){t.tag?(r&&(n.push(new e(r)),r=""),n.push(t)):r+=t.code}),r&&n.push(new e(r)),n},e.M="@__@@",e}();e.Code=t}(CHL||(CHL={}));var CHL;!function(e){var t=function(){function t(){}return t.prototype.loadTemplate=function(t){var n=this;e.TemplateManager.loadTemplate(t,function(){n.execute()})},t.addTemplate=function(t){e.TemplateManager.addTemplate(t)},t.prototype.execute=function(t){for(var n=t||document.getElementsByTagName("script"),r=n.length;r--;){var a=n[r];if(/^code\/.+$/.test(a.type)){var i=a.type.split("/")[1],o=e.TemplateManager.getTemplate(i);if(o){var s='<div class="title">'+(a.title?a.title+" / ":"")+i+"</div>",c=a.innerHTML.replace(/^[\s]*\n|[\s\r\n]*$/g,"").split(/[\r\n]/g),l=1/0;c.forEach(function(e,t){c[t]=e=e.replace(/^[ \t]+/,function(e){return e.replace(/\t/g,"    ")});var n=/^(\s*)/.exec(e);n[1]&&(l=Math.min(n[1].length,l))});var p=new RegExp("^\\s{"+l+"}|[s]*$","g");c.forEach(function(e,t){c[t]=e.replace(p,"")});var u=[new e.Code(c.join("\n"))];o.define.forEach(function(t){var n=[];u.forEach(function(e){e.markCodeAndStore(t,n)}),u=e.Code.flatten(n)});var d="",f=0;c.forEach(function(){d+="<div>"+ ++f+"</div>"});var g=document.createElement("div");g.setAttribute("class","chl"),g.setAttribute("title",a.title),g.innerHTML=s+'<code><div class="no">'+d+'</div><div class="code"><div>'+u.join("")+"</div></div></code>",a.parentElement.insertBefore(g,a),a.remove()}}}},t.template=[],t}();e.CodeHighLight=t}(CHL||(CHL={}));var CHL;!function(e){var t=function(){function e(){}return e.contains=function(e,t){for(var n=!1,r=e.length;r--&&!(n=n||e[r]===t););return n},e.getTemplate=function(t){if(!t)return null;t=t.toLowerCase();for(var n=e.templates.length;n--;)if(e.templates[n].lang.test(t))return e.templates[n]},e.templates=[],e.loadTemplate=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(e){if(4===n.readyState&&200===n.status){var r=document.createElement("script");r.innerHTML=n.responseText,document.body.appendChild(r),"function"==typeof t&&t()}},n.open("GET",e,!0),n.send(null)},e.addTemplate=function(t){var n=(e.contains,!1);e.templates.forEach(function(r,a){r.lang===t.lang&&(e.templates.splice(a,1,t),n=!0)}),n||e.templates.push(t)},e}();e.TemplateManager=t}(CHL||(CHL={})),CHL.CodeHighLight.addTemplate({version:"0.0.1",lang:/^(?:js|javascript|ecma(?:script)?\d*|es\d*|ts|typescript)$/i,define:[{"class":"comment",regex:/(\/\*[\w\W]+?\*\/)/g},{"class":"comment",regex:/(\/\/.*?)(?:[ \t]*[\r\n]+|$)/g,str:"`$1`\n"},{"class":"literal",regex:/(['"`])(.*?[^\\]\1)/g,str:"`$1$2`"},{"class":"premitive",regex:/([\W])([+\-]?[\d\.]+)/g,str:"$1`$2`"},{"class":"regexp",regex:/[\b]*(\/.*?[^\\]\/[gim]*)\b/g},{"class":"premitive",regex:/\b(true|false|NaN|null|undefined|void)\b/g},{"class":"keyword",regex:/\b(break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|while|with|class|enum|export|extends|import|super|implements|interface|let|package|private|protected|public|static|yield)\b/g},{"class":"builtin",regex:/\b(escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|Array|Boolean|Date|Error|EvalError|Function|JSON|Math|Number|Object|RegExp|ReferenceError|RangeError|String|SyntaxError|TypeError|URIError|console|debugger)\b/g}]});